(function(){"use strict";var e={2793:function(e,o,t){var a=t(5130),l=t(6768);function r(e,o,t,a,r,s){const n=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.Wv)(n)}var s={},n=t(1241);const i=(0,n.A)(s,[["render",r]]);var d=i,c=t(1387),u=t(4232),m=t.p+"img/bookstore.a0398965.png";const b={class:"d-flex flex-column min-vh-100"},p={class:"flex-grow-1"},k={class:"container my-4"},h={class:"row g-3"},f={class:"col-md-6"},g={class:"col-md-6"},v=["value"],L={class:"container"},y={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 row-cols-lg-4 g-4"},w={class:"card h-100 shadow-sm border-0 rounded-4"},x=["src","alt"],E={class:"card-body"},F=["title"],C={class:"mb-1 text-muted"},_={class:"text-success fw-semibold"},U={class:"card-footer bg-white border-0 d-flex justify-content-center"},j={class:"modal fade",id:"agregarModal",tabindex:"-1","aria-hidden":"true"},A={class:"modal-dialog modal-lg"},V={class:"modal-content shadow"},q={class:"modal-body"},O={class:"row g-3"},P={class:"col-md-6"},X={class:"form-label"},T=["type","onUpdate:modelValue","required"],S=["onUpdate:modelValue"],I={class:"col-12"},W=["value"];function M(e,o,t,r,s,n){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",b,[o[12]||(o[12]=(0,l.Fv)('<header class="bg-dark text-white py-4 shadow-sm" data-v-24f58804><div class="container d-flex justify-content-between align-items-center" data-v-24f58804><div class="d-flex align-items-center gap-3" data-v-24f58804><img src="'+m+'" alt="Logo" height="60" data-v-24f58804><h2 class="m-0" data-v-24f58804>Proyecto 2</h2></div><button class="btn btn-secondary" data-bs-toggle="modal" data-bs-target="#agregarModal" data-v-24f58804> Agregar Nuevo</button></div></header>',1)),(0,l.Lk)("main",p,[(0,l.Lk)("div",k,[(0,l.Lk)("div",h,[(0,l.Lk)("div",f,[(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control",placeholder:"Buscar libro...","onUpdate:modelValue":o[0]||(o[0]=e=>s.searchTerm=e)},null,512),[[a.Jo,s.searchTerm]])]),(0,l.Lk)("div",g,[(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":o[1]||(o[1]=e=>s.selectedCategory=e)},[o[5]||(o[5]=(0,l.Lk)("option",{value:""},"Todas las categorías",-1)),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.categorias,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,u.v_)(e.nombre),9,v)))),128))],512),[[a.u1,s.selectedCategory]])])])]),(0,l.Lk)("div",L,[(0,l.Lk)("div",y,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.filteredBooks,(e=>((0,l.uX)(),(0,l.CE)("div",{key:e.id,class:"col"},[(0,l.Lk)("div",w,[e.imagen?((0,l.uX)(),(0,l.CE)("img",{key:0,src:n.getImageUrl(e.imagen),class:"card-img-top bg-white rounded-top",alt:e.nombre,style:{height:"300px","object-fit":"fill"}},null,8,x)):(0,l.Q3)("",!0),(0,l.Lk)("div",E,[(0,l.Lk)("h5",{class:"card-title text-primary fw-bold text-truncate",title:e.nombre},(0,u.v_)(e.nombre),9,F),(0,l.Lk)("p",C,[o[6]||(o[6]=(0,l.Lk)("strong",null,"Autor:",-1)),(0,l.eW)(" "+(0,u.v_)(e.autor),1)]),(0,l.Lk)("p",_,(0,u.v_)(e.precio)+" €",1)]),(0,l.Lk)("div",U,[(0,l.bF)(i,{to:`/books/${e.id}`,class:"btn btn-outline-primary btn-sm w-100"},{default:(0,l.k6)((()=>o[7]||(o[7]=[(0,l.eW)("Ver Detalles")]))),_:2,__:[7]},1032,["to"])])])])))),128))])])]),o[13]||(o[13]=(0,l.Lk)("footer",{class:"bg-dark text-white py-3 mt-auto"},[(0,l.Lk)("div",{class:"container text-center"},[(0,l.Lk)("small",null,"© 2025 Proyecto 2 - Elias Arias - Todos los derechos reservados.")])],-1)),(0,l.Lk)("div",j,[(0,l.Lk)("div",A,[(0,l.Lk)("div",V,[o[11]||(o[11]=(0,l.Lk)("div",{class:"modal-header bg-secondary text-white"},[(0,l.Lk)("h5",{class:"modal-title"},"Agregar Libro"),(0,l.Lk)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal"})],-1)),(0,l.Lk)("div",q,[(0,l.Lk)("form",{onSubmit:o[4]||(o[4]=(0,a.D$)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"]))},[(0,l.Lk)("div",O,[(0,l.Lk)("div",P,[o[8]||(o[8]=(0,l.Lk)("label",{class:"form-label"},"Imagen",-1)),(0,l.Lk)("input",{type:"file",class:"form-control",onChange:o[2]||(o[2]=(...e)=>n.handleFileUpload&&n.handleFileUpload(...e)),required:""},null,32)]),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.fields,((e,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:"col-md-6"},[(0,l.Lk)("label",X,(0,u.v_)(e.label),1),"textarea"!==e.type?(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:0,type:e.type,class:"form-control","onUpdate:modelValue":o=>s.form[e.model]=o,required:e.required},null,8,T)),[[a.hp,s.form[e.model]]]):(0,l.Q3)("",!0),"textarea"===e.type?(0,l.bo)(((0,l.uX)(),(0,l.CE)("textarea",{key:1,class:"form-control",rows:"3","onUpdate:modelValue":o=>s.form[e.model]=o},null,8,S)),[[a.Jo,s.form[e.model]]]):(0,l.Q3)("",!0)])))),128)),(0,l.Lk)("div",I,[o[9]||(o[9]=(0,l.Lk)("label",{class:"form-label"},"Categorías",-1)),(0,l.bo)((0,l.Lk)("select",{class:"form-select","onUpdate:modelValue":o[3]||(o[3]=e=>s.form.categorias=e),multiple:""},[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(s.categorias,(e=>((0,l.uX)(),(0,l.CE)("option",{key:e.id,value:e.id},(0,u.v_)(e.nombre),9,W)))),128))],512),[[a.u1,s.form.categorias]])])]),o[10]||(o[10]=(0,l.Lk)("div",{class:"mt-4 d-flex justify-content-end"},[(0,l.Lk)("button",{type:"submit",class:"btn btn-success px-4"},"Guardar")],-1))],32)])])])])])}t(8111),t(2489),t(7588),t(3579);var B={data(){return{books:[],categorias:[],selectedCategory:"",searchTerm:"",form:{imagen:null,nombre:"",autor:"",precio:"",fecha_subida:"",editorial:"",paginas:"",anio:"",codigo:"",descripcion:"",categorias:[]},fields:[{label:"Nombre",model:"nombre",type:"text",required:!0},{label:"Autor",model:"autor",type:"text",required:!0},{label:"Precio",model:"precio",type:"number",required:!0},{label:"Fecha Subida",model:"fecha_subida",type:"date",required:!0},{label:"Editorial",model:"editorial",type:"text",required:!0},{label:"Páginas",model:"paginas",type:"number",required:!0},{label:"Año",model:"anio",type:"number",required:!0},{label:"Código",model:"codigo",type:"text",required:!0},{label:"Descripción",model:"descripcion",type:"textarea",required:!0}]}},computed:{filteredBooks(){return this.books.filter((e=>{const o=e.nombre?.toLowerCase().includes(this.searchTerm.toLowerCase()),t=""===this.selectedCategory||e.categorias?.some((e=>e.id==this.selectedCategory));return o&&t}))}},mounted(){this.fetchBooks(),this.fetchCategories()},methods:{fetchBooks(){fetch("http://localhost:8000/index.php/api/books").then((e=>e.json())).then((e=>{this.books=Array.isArray(e)?e:[]}))},fetchCategories(){fetch("http://localhost:8000/index.php/api/categories").then((e=>e.json())).then((e=>{this.categorias=Array.isArray(e)?e:[]}))},handleFileUpload(e){this.form.imagen=e.target.files[0]},getImageUrl(e){return e?e.startsWith("http")?e:`http://localhost:8000/${e}`:""},handleSubmit(){const e=new FormData;for(const o in this.form)"categorias"===o?this.form[o].forEach((o=>e.append("categorias[]",o))):e.append(o,this.form[o]);fetch("http://localhost:8000/index.php/api/books",{method:"POST",body:e}).then((()=>{this.fetchBooks();const e=bootstrap.Modal.getInstance(document.getElementById("agregarModal"));e?.hide()}))}}};const J=(0,n.A)(B,[["render",M],["__scopeId","data-v-24f58804"]]);var D=J;const $={class:"d-flex flex-column min-vh-100"},K={class:"bg-dark text-white py-4 shadow-sm"},N={class:"container d-flex justify-content-between align-items-center"},Q={class:"container my-5 flex-grow-1"},z={key:0,class:"card p-4 shadow"},G={class:"row g-3"},H={class:"col-md-4"},R=["src","alt"],Y={class:"col-md-8"},Z={class:"text-danger"},ee={class:"mt-4 d-flex gap-3"},oe={key:1,class:"alert alert-warning"},te={class:"modal fade",id:"editModal",tabindex:"-1","aria-hidden":"true"},ae={class:"modal-dialog modal-lg"},le={class:"modal-content shadow"},re={class:"modal-body"},se={class:"row g-3"},ne={class:"col-md-6"},ie={class:"col-md-6"},de={class:"col-md-6"},ce={class:"col-md-6"},ue={class:"col-md-6"},me={class:"col-md-6"},be={class:"col-md-6"},pe={class:"col-md-6"},ke={class:"col-12"};function he(e,o,t,r,s,n){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",$,[(0,l.Lk)("header",K,[(0,l.Lk)("div",N,[o[13]||(o[13]=(0,l.Lk)("div",{class:"d-flex align-items-center gap-3"},[(0,l.Lk)("a",{href:"/"},[(0,l.Lk)("img",{src:m,alt:"Logo",height:"60"})]),(0,l.Lk)("h2",{class:"m-0"},"Proyecto 2")],-1)),(0,l.bF)(i,{to:"/",class:"btn btn-outline-light"},{default:(0,l.k6)((()=>o[12]||(o[12]=[(0,l.eW)("← Volver")]))),_:1,__:[12]})])]),(0,l.Lk)("main",Q,[s.book?((0,l.uX)(),(0,l.CE)("div",z,[(0,l.Lk)("div",G,[(0,l.Lk)("div",H,[s.book.imagen?((0,l.uX)(),(0,l.CE)("img",{key:0,src:n.getImageUrl(s.book.imagen),class:"card-img-top bg-white p-3 rounded-top",alt:s.book.nombre,style:{height:"450px","object-fit":"contain"}},null,8,R)):(0,l.Q3)("",!0)]),(0,l.Lk)("div",Y,[(0,l.Lk)("h2",Z,(0,u.v_)(s.book.nombre),1),(0,l.Lk)("p",null,[o[14]||(o[14]=(0,l.Lk)("strong",null,"Autor:",-1)),(0,l.eW)(" "+(0,u.v_)(s.book.autor),1)]),(0,l.Lk)("p",null,[o[15]||(o[15]=(0,l.Lk)("strong",null,"Precio:",-1)),(0,l.eW)(" "+(0,u.v_)(s.book.precio)+" €",1)]),(0,l.Lk)("p",null,[o[16]||(o[16]=(0,l.Lk)("strong",null,"Editorial:",-1)),(0,l.eW)(" "+(0,u.v_)(s.book.editorial),1)]),(0,l.Lk)("p",null,[o[17]||(o[17]=(0,l.Lk)("strong",null,"Páginas:",-1)),(0,l.eW)(" "+(0,u.v_)(s.book.paginas),1)]),(0,l.Lk)("p",null,[o[18]||(o[18]=(0,l.Lk)("strong",null,"Año:",-1)),(0,l.eW)(" "+(0,u.v_)(s.book.anio),1)]),(0,l.Lk)("p",null,[o[19]||(o[19]=(0,l.Lk)("strong",null,"Fecha de subida:",-1)),(0,l.eW)(" "+(0,u.v_)(s.book.fecha_subida),1)]),(0,l.Lk)("p",null,[o[20]||(o[20]=(0,l.Lk)("strong",null,"Código:",-1)),(0,l.eW)(" "+(0,u.v_)(s.book.codigo),1)]),(0,l.Lk)("p",null,[o[21]||(o[21]=(0,l.Lk)("strong",null,"Descripción:",-1)),(0,l.eW)(" "+(0,u.v_)(s.book.descripcion),1)]),(0,l.Lk)("div",ee,[(0,l.Lk)("button",{class:"btn btn-warning",onClick:o[0]||(o[0]=(...e)=>n.openEditModal&&n.openEditModal(...e))},"Editar"),(0,l.Lk)("button",{class:"btn btn-danger",onClick:o[1]||(o[1]=(...e)=>n.deleteBook&&n.deleteBook(...e))},"Eliminar")])])])])):((0,l.uX)(),(0,l.CE)("div",oe,"Cargando libro..."))]),o[33]||(o[33]=(0,l.Lk)("footer",{class:"bg-dark text-white py-3 mt-auto"},[(0,l.Lk)("div",{class:"container text-center"},[(0,l.Lk)("small",null,"© 2025 Proyecto 2 - Elias Arias - Todos los derechos reservados.")])],-1)),(0,l.Lk)("div",te,[(0,l.Lk)("div",ae,[(0,l.Lk)("div",le,[o[32]||(o[32]=(0,l.Lk)("div",{class:"modal-header bg-secondary text-white"},[(0,l.Lk)("h5",{class:"modal-title"},"Editar Libro"),(0,l.Lk)("button",{type:"button",class:"btn-close btn-close-white","data-bs-dismiss":"modal"})],-1)),(0,l.Lk)("div",re,[(0,l.Lk)("form",{onSubmit:o[11]||(o[11]=(0,a.D$)(((...e)=>n.submitEdit&&n.submitEdit(...e)),["prevent"]))},[(0,l.Lk)("div",se,[(0,l.Lk)("div",ne,[o[22]||(o[22]=(0,l.Lk)("label",{class:"form-label"},"Nombre",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[2]||(o[2]=e=>s.editForm.nombre=e),required:""},null,512),[[a.Jo,s.editForm.nombre]])]),(0,l.Lk)("div",ie,[o[23]||(o[23]=(0,l.Lk)("label",{class:"form-label"},"Autor",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[3]||(o[3]=e=>s.editForm.autor=e),required:""},null,512),[[a.Jo,s.editForm.autor]])]),(0,l.Lk)("div",de,[o[24]||(o[24]=(0,l.Lk)("label",{class:"form-label"},"Precio",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":o[4]||(o[4]=e=>s.editForm.precio=e)},null,512),[[a.Jo,s.editForm.precio]])]),(0,l.Lk)("div",ce,[o[25]||(o[25]=(0,l.Lk)("label",{class:"form-label"},"Editorial",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[5]||(o[5]=e=>s.editForm.editorial=e)},null,512),[[a.Jo,s.editForm.editorial]])]),(0,l.Lk)("div",ue,[o[26]||(o[26]=(0,l.Lk)("label",{class:"form-label"},"Páginas",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":o[6]||(o[6]=e=>s.editForm.paginas=e)},null,512),[[a.Jo,s.editForm.paginas]])]),(0,l.Lk)("div",me,[o[27]||(o[27]=(0,l.Lk)("label",{class:"form-label"},"Año",-1)),(0,l.bo)((0,l.Lk)("input",{type:"number",class:"form-control","onUpdate:modelValue":o[7]||(o[7]=e=>s.editForm.anio=e)},null,512),[[a.Jo,s.editForm.anio]])]),(0,l.Lk)("div",be,[o[28]||(o[28]=(0,l.Lk)("label",{class:"form-label"},"Fecha de Subida",-1)),(0,l.bo)((0,l.Lk)("input",{type:"date",class:"form-control","onUpdate:modelValue":o[8]||(o[8]=e=>s.editForm.fecha_subida=e)},null,512),[[a.Jo,s.editForm.fecha_subida]])]),(0,l.Lk)("div",pe,[o[29]||(o[29]=(0,l.Lk)("label",{class:"form-label"},"Código",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[9]||(o[9]=e=>s.editForm.codigo=e),required:""},null,512),[[a.Jo,s.editForm.codigo]])]),(0,l.Lk)("div",ke,[o[30]||(o[30]=(0,l.Lk)("label",{class:"form-label"},"Descripción",-1)),(0,l.bo)((0,l.Lk)("textarea",{class:"form-control","onUpdate:modelValue":o[10]||(o[10]=e=>s.editForm.descripcion=e),rows:"3"},null,512),[[a.Jo,s.editForm.descripcion]])])]),o[31]||(o[31]=(0,l.Lk)("div",{class:"mt-4 d-flex justify-content-end"},[(0,l.Lk)("button",{type:"submit",class:"btn btn-success px-4"},"Guardar Cambios")],-1))],32)])])])])])}t(4114);var fe={data(){return{book:null,editForm:{}}},mounted(){const e=this.$route.params.id;fetch(`http://localhost:8000/index.php/api/books/${e}`).then((e=>e.json())).then((e=>{e.error?alert("Libro no encontrado"):this.book=e})).catch((e=>{console.error("Error al cargar el libro:",e),alert("Ocurrió un error al cargar el libro")}))},methods:{getImageUrl(e){return e?e.startsWith("http")?e:`http://localhost:8000/${e}`:""},openEditModal(){this.editForm={...this.book};const e=document.getElementById("editModal"),o=new bootstrap.Modal(e);o.show()},submitEdit(){const e=new FormData;for(const o in this.editForm)e.append(o,this.editForm[o]);fetch("http://localhost:8000/index.php/api/books/edit",{method:"POST",body:e}).then((e=>e.json())).then((e=>{alert("Libro actualizado con éxito"),window.location.reload()})).catch((e=>{console.error("Error al actualizar:",e),alert("Error al guardar cambios")}))},deleteBook(){confirm("¿Estás seguro de que deseas eliminar este libro?")&&fetch(`http://localhost:8000/index.php/api/books/${this.book.id}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"_method=DELETE"}).then((e=>{if(!e.ok)throw new Error("Error al eliminar");return e.json()})).then((()=>{alert("Libro eliminado"),this.$router.push("/")})).catch((e=>{console.error("Error al eliminar el libro:",e),alert("No se pudo eliminar el libro")}))}}};const ge=(0,n.A)(fe,[["render",he]]);var ve=ge;const Le=[{path:"/",name:"Inicio",component:D},{path:"/books/:id",name:"DetalleLibro",component:ve}],ye=(0,c.aE)({history:(0,c.Bt)(),routes:Le});var we=ye,xe=t(8077);window.bootstrap=xe,(0,a.Ef)(d).use(we).mount("#app")}},o={};function t(a){var l=o[a];if(void 0!==l)return l.exports;var r=o[a]={exports:{}};return e[a].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(o,a,l,r){if(!a){var s=1/0;for(c=0;c<e.length;c++){a=e[c][0],l=e[c][1],r=e[c][2];for(var n=!0,i=0;i<a.length;i++)(!1&r||s>=r)&&Object.keys(t.O).every((function(e){return t.O[e](a[i])}))?a.splice(i--,1):(n=!1,r<s&&(s=r));if(n){e.splice(c--,1);var d=l();void 0!==d&&(o=d)}}return o}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,l,r]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var a in o)t.o(o,a)&&!t.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.p="/proyecto-2-prog-web-frontend/"}(),function(){var e={524:0};t.O.j=function(o){return 0===e[o]};var o=function(o,a){var l,r,s=a[0],n=a[1],i=a[2],d=0;if(s.some((function(o){return 0!==e[o]}))){for(l in n)t.o(n,l)&&(t.m[l]=n[l]);if(i)var c=i(t)}for(o&&o(a);d<s.length;d++)r=s[d],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(c)},a=self["webpackChunkfrontend_vue"]=self["webpackChunkfrontend_vue"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))}();var a=t.O(void 0,[504],(function(){return t(2793)}));a=t.O(a)})();
//# sourceMappingURL=app.90965fe6.js.map